# omron_moveit_config/config/omron_viper_s650_servo.yaml

moveit_servo:
  # -------------------------------------------------------
  # Allgemeine Servo-Konfiguration
  # -------------------------------------------------------

  # Koordinatensystem, in dem Befehle interpretiert werden
  # z.B. "world" oder Basislink deines Roboters
  planning_frame: world

  # Eingabetyp:
  # - "unitless": normierte Befehle [-1, 1] (Twist/Joint)
  # - "speed_units": z.B. m/s, rad/s
  command_in_type: "unitless"

  # Art der Ausgaben:
  # - "trajectory_msgs/JointTrajectory": für Joint-Trajectory-Controller
  # - "geometry_msgs/TwistStamped": für Twist-Ausgabe
  command_out_type: "trajectory_msgs/JointTrajectory"

  # Topic mit aktuellen Gelenkzuständen
  joint_topic: "/joint_states"

  # Topic, auf das Servo seine Befehle schreibt (später an Controller anbinden)
  command_out_topic: "/omron_viper_s650/servo_commands"

  # TCP-Frame / Command-Frame des Roboters
  # -> an dein Tool-Frame anpassen (z.B. "tool_mount" oder letzter Link)
  robot_link_command_frame: "tool_mount"

  # -------------------------------------------------------
  # Publish- / Update-Raten
  # -------------------------------------------------------

  # Rate, mit der Servo Kommandos sendet (Sekunden)
  # 0.008 ≈ 125 Hz, kannst du später anpassen
  publish_period: 0.008

  # Dauer, wie lange ein eingehender Befehl gültig bleibt (Sekunden)
  incoming_command_timeout: 0.1

  # Anzahl von "Halt"-Nachrichten, die gesendet werden, wenn gestoppt wird
  num_outgoing_halt_msgs_to_publish: 4

  # -------------------------------------------------------
  # Skalierung der Kommandos (für command_in_type = unitless)
  # -------------------------------------------------------

  # Skalierung für lineare Bewegungen in m/s bei "unitless"
  linear_scale_x: 0.5
  linear_scale_y: 0.5
  linear_scale_z: 0.5

  # Skalierung für Rotationen (rad/s) bei "unitless"
  rotational_scale_x: 0.8
  rotational_scale_y: 0.8
  rotational_scale_z: 0.8

  # Skalierung für Gelenk-Kommandos (rad/s) bei "unitless"
  joint_scale: 1.0

  # -------------------------------------------------------
  # State-Publishing & Limits
  # -------------------------------------------------------

  # Publizieren von States
  publish_joint_positions: true
  publish_joint_velocities: true
  publish_joint_accelerations: false

  use_gazebo: false
  allow_joint_position_limits_violation: false
  allow_collision_while_moving: false

  # Grenzen gegen zu große plötzliche Änderungen
  # (einfacher Schutz, Feintuning später)
  linear_motion_command_limit: 1.0     # m/s
  rotational_motion_command_limit: 2.0 # rad/s
  joint_move_limit: 3.14               # rad/s

  # -------------------------------------------------------
  # Filter & Glättung
  # -------------------------------------------------------

  # Low-Pass-Filter: 1.0 = kein Filter, kleiner -> stärkerer Filter
  low_pass_filter_coeff: 0.2

  # -------------------------------------------------------
  # Status / Debug
  # -------------------------------------------------------

  low_latency_mode: true
  status_topic: "/omron_viper_s650/servo_status"